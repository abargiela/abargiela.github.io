---
layout: post
title: IO Stress
date: '2012-03-13T10:59:00.002-03:00'
author: Alexandre Bargiela
tags: 
modified_time: '2012-12-27T14:21:23.202-02:00'
blogger_id: tag:blogger.com,1999:blog-7490778459153845376.post-2890360624884426408
blogger_orig_url: http://abargiela.blogspot.com/2012/03/dd.html
---

Olá!<br />Tive uma nova necessidade, a de escrever/ler em um diretório que estava montado (iscsi), houve a necessidade de estressa-lo para verificarmos como seria o desempenho, segue o script:<br /><br />Para escrita:<br /><a href="https://github.com/abargiela/scripts/blob/master/io_stress_write.sh">https://github.com/abargiela/scripts/blob/master/io_stress_write.sh</a><br /><br />E para leitura:<br /><div><a href="https://github.com/abargiela/scripts/blob/master/io_stress_reading.sh">https://github.com/abargiela/scripts/blob/master/io_stress_reading.sh</a><br /><br />Seguiro executar os 2 scripts simultaneamentes, ou seja, abra 2 terminais e execute 1 em cada.<br /><br /></div><div>Pode parecer feio, porém para minha necessidade atendeu!</div><div><br /></div><div>Os dados coletados serão similares a:</div><div><br /></div><div><div><i><span style="background-color: black; color: lime; font-family: 'Courier New', Courier, monospace;">Tue Mar 13 11:23:26 BRT 2012</span></i></div><div><i><span style="background-color: black; color: lime; font-family: 'Courier New', Courier, monospace;">1000000+0 records in</span></i></div><div><i><span style="background-color: black; color: lime; font-family: 'Courier New', Courier, monospace;">1000000+0 records out</span></i></div><div><i><span style="background-color: black; color: lime; font-family: 'Courier New', Courier, monospace;">1048000000 bytes (1.0 GB) copied, 6.61428 seconds, 158 MB/s</span></i></div><div><i><span style="background-color: black; color: lime; font-family: 'Courier New', Courier, monospace;">Tue Mar 13 11:24:22 BRT 2012</span></i></div><div><i><span style="background-color: black; color: lime; font-family: 'Courier New', Courier, monospace;">1000000+0 records in</span></i></div><div><i><span style="background-color: black; color: lime; font-family: 'Courier New', Courier, monospace;">1000000+0 records out</span></i></div><div><i><span style="background-color: black; color: lime; font-family: 'Courier New', Courier, monospace;">1048000000 bytes (1.0 GB) copied, 6.56956 seconds, 160 MB/s</span></i></div><div><i><span style="background-color: black; color: lime; font-family: 'Courier New', Courier, monospace;">Tue Mar 13 11:25:14 BRT 2012</span></i></div></div><div><br /></div><div>No script de escrita(io_stress_write.sh) você consegue coletar as estatísticas utilizando os parâmetros no mesmo, a saída será similar à:</div><div><br /><span style="color: lime;"><i><span style="background-color: black; font-family: 'Courier New', Courier, monospace;">Média de transmissão: 149 MB/s&nbsp;</span></i></span><br /><span style="color: lime;"><i><span style="background-color: black; font-family: 'Courier New', Courier, monospace;">Menor taxa de transmissão: 44.9 MB/s</span></i></span><br /><span style="color: lime;"><i><span style="background-color: black; font-family: 'Courier New', Courier, monospace;">Maior taxa de transmissão: 167 MB/s</span></i></span><br /><div><span style="color: lime;"><i><br /></i></span></div><br />É isso, não sei o quanto essa dica pode ajudar, porém fica aqui para futuras consultas :)</div>